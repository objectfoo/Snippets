<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<meta name="description" content="Js Test Construct module" />
<meta charset=utf-8 />
<title>constructor module prototype methods</title>
<style>
button {
  padding: 8px 12px;
  background: #eee;
  border: 1px solid #999;
  border-radius: 4px;
}

label {
  text-align: center;
  display: inline-block;
  width: 24px;
  border-bottom: 1px dotted gray;
}
</style>
</head>
<body>
  <button id="decrement">-</button>
  <label id="count"></label>
  <button id="increment">+</button>

<script>
  (function () {
    'use strict';

    var Counter = (function() {
      function C() { this.count = 0; }
      C.prototype = {
        inc: function() { this.count++; },
        dec: function() { this.count--; },
        getCount: function() { return this.count; }
      };
      return C;
    })(),

    myCounter = new Counter(),

    updateLabel = function() {
      var label = document.getElementById('count');
      updateLabel = function  () {
        $(label).text(myCounter.getCount());
      };
      updateLabel();
    };

    $('body').on('click', 'button', function() {
      var id = this.id;

      if (id === 'increment') {
        myCounter.inc();
      } else {
        myCounter.dec();
      }
      updateLabel();
    });
    updateLabel();
  })();
</script>
</body>
</html>
